webpackJsonp([34],{1044:function(t,e,a){"use strict";(function(t){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(155),r=s(i),n=a(230),o=s(n),l=a(116),d=s(l),u=a(100),c=s(u),h=a(231);s(h);e.default={name:"listamountMax",data:function(){var t=this,e=function(t,e,a){0==e||1==e?a():a(new Error(t.message))};return{tableOptions:{width:"100%"},ImgUrl:"",visible:!1,columns:[{title:"企业名称",width:100,key:"enterprise_name"},{title:"申请额度",width:100,key:"amount_max"},{title:"创建时间",width:100,key:"created"},{title:"营业执照照片",width:140,key:"license_image",align:"center",render:function(e,a){return e("div",{attrs:{style:"width: 100px;height:90px;"}},[e("img",{props:{type:"primary",size:"small"},attrs:{src:a.row.license_image,style:"width: 100px;height:60px;border-radius: 2px;"},style:{marginTop:"15px"},on:{click:function(){t.handleView(a.row.license_image)}}})])}},{title:"身份证正面",width:140,align:"center",key:"front_image",render:function(e,a){return console.log(a.row),e("div",{attrs:{style:"width: 100px;height:90px;"}},[e("img",{props:{type:"primary",size:"small"},attrs:{src:a.row.front_image,style:"width: 100px;height:60px;border-radius: 2px;"},style:{marginTop:"15px"},on:{click:function(){t.handleView(a.row.front_image)}}})])}},{title:"身份证背面",width:140,align:"center",key:"reverse_image",render:function(e,a){return console.log(a.row),e("div",{attrs:{style:"width:100px;height:90px;"}},[e("img",{props:{type:"primary",size:"small"},attrs:{src:a.row.reverse_image,style:"width: 100px;height:60px;border-radius: 2px;"},style:{marginTop:"15px"},on:{click:function(){t.handleView(a.row.reverse_image)}}})])}},{title:"营业执照注册号",width:100,key:"license_num"},{title:"法人",width:100,key:"legal_person"},{title:"注册地址",width:100,key:"regist_address"},{title:"会员名称",width:100,key:"member_name"},{title:"现金花费总额",width:120,key:"cash_total"},{title:"红积分花费总额",width:130,key:"red_total"},{title:"购物积分花费总额",width:140,key:"shopping_total"},{title:"公司规模",width:100,key:"scale",render:function(t,e){var a="";return 1==e.row.status&&(a="1—20人"),2==e.row.status&&(a="21-99人"),3==e.row.status&&(a="100—200人"),4==e.row.status&&(a="201-500人"),5==e.row.status&&(a="500人以上"),t("span",{props:{size:"small"}},a)}},{title:"类型",key:"type",width:100,render:function(t,e){var a="";return 1==e.row.type&&(a="个人申请"),2==e.row.type&&(a="申请企业会员"),t("span",{props:{size:"small"}},a)}},{title:"状态",width:100,key:"status",align:"center",render:function(t,e){var a="default",s="待审核";return 1==e.row.status&&(a="green",s="通过"),-1==e.row.status&&(a="red",s="拒绝"),2==e.row.status&&(a="default",s="待审核"),t("Tag",{props:{color:a,size:"small"}},s)}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){var s=e("Button",{props:{size:"small",type:"error"},style:{marginRight:"10px"},on:{click:function(){t.doWhat("review",a.index,-1)}}},"拒绝"),i=e("Button",{props:{size:"small",type:"success"},on:{click:function(){t.doWhat("review",a.index,1)}}},"通过"),r=[];return 2==a.row.status&&(r.push(s),r.push(i)),e("div",r)}}],saveType:"new",doType:"list",switching:!1,tableData:[],merchantTypeData:[],areaData:{areaDataReady:3,province:[],citys:[],district:[]},shipStatus:["待审核","审核成功","审核失败"],Totals:{wait:"0.00",fail:"0.00",success:"0.00",sum_total:"0.00"},page:{dataCount:0,pageCount:0,pageSize:10,pageNumber:1,pageSizeOpts:[10,20,50,100]},dataReady:0,currentData:{},defaultData:{id:8,merchant_id:1,merchant_name:"",bank_id:1111,total:"1.0000",status:0,comment:"",date_added:"2017-11-16 16:00:20",bank_name:"",bank_number:""},updateStatusForm:{},updateStatusValidate:{status:[{validator:e,message:"请选择审核结果",trigger:"blur"}]},oldPassError:"",allSelect:[],loadBut:!1,updateStatus:!1,saveUpdateStatusLoading:!1,searchData:{keyword:"",searchDate:[],startDate:"",endDate:"",status:"",type:""},searchValidata:{}}},computed:{getLoading:function(){return!(0==this.dataReady)},areaDataReady:function(){return!(0==this.areaData.areaDataReady)},doName:function(){return"list"==this.doType?"商户基本信息管理":"edit"==this.doType?"编辑商户":"add"==this.doType?"添加商户":"商户详情"},currentDataValidate:function(){return"add"==this.doType?this.addDataValidate:this.editDataValidate},hasDataChange:function(){return!((0,r.default)(this.currentData)==(0,r.default)(this.tableData[this.currentData.listIndex]))}},methods:{changePage:function(t){this.page.pageNumber=t,this.search(t)},handleView:function(t){this.ImgUrl=t,this.visible=!0},changePageSize:function(t){this.page.pageSize=t,this.page.pageCount=Math.ceil(this.page.dataCount/this.page.pageSize),this.search()},OnSelect:function(t){},selectionchange:function(t){},allOnSelect:function(t){this.allSelect=t},checkPower:function(t){return!!this.$store.state.Rights[o.default.api.management.Reviewmanagement[t].MD5()]},doWhat:function(t,e,a){if(!this.checkPower(t))return void this.$Message.warning("对不起，您没有此操作权限！");this.switching=!0,"add"==t&&(this.resetCurrentData(),this.doType="add"),"edit"==t&&(this.showEdit(e),this.doType="edit"),"delete"==t&&this.delete(e),"review"==t&&this.changeStatus(e,a),"list"==t&&(this.resetCurrentData(),this.dataReady+=1,this.init(),this.doType="list"),this.switching=!1},view:function(e){this.currentData=t.extend(!0,{},this.tableData[e]),this.doType="view"},showEdit:function(e){this.currentData=t.extend(!0,{},this.tableData[e]),this.currentData.userewm=o.default.apiRootPath+o.default.api.public.ewm+"&merchantId="+this.currentData.merchantId,this.setCity(this.currentData.merchantProvinceId,!0),this.setDistrict(this.currentData.merchantCityId,!0),this.doType="edit"},resetCurrentData:function(){this.currentData=t.extend(!0,{},this.defaultData)},search:function(t){this.searchData.searchDate.length&&(this.searchData.startDate=d.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=d.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd")),this.page.pageNumber=1,t&&(this.page.pageNumber=t),this.doWhat("list")},resetSearch:function(){this.searchData={keyword:"",searchDate:[],startDate:"",endDate:"",type:0},this.page.pageNumber=1,this.dataReady+=1,this.init()},init:function(){this.getList()},getList:function(){var e=this,a={ssid:c.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize,type:2};""!=this.searchData.keyword&&(a.search=d.default.trim(this.searchData.keyword)),""!=this.searchData.startDate&&(a.startDate=this.searchData.startDate),""!=this.searchData.status&&(a.status=this.searchData.status),""!=this.searchData.endDate&&(a.endDate=this.searchData.endDate),t.ajax({url:o.default.apiRootPath+o.default.api.amountMax.listamountMax.list,type:"POST",dataType:"json",data:a}).done(function(t){e.dataReady--,t?0==t.code?(e.page.dataCount=t.data.count,e.page.pageCount=Math.ceil(e.page.dataCount/e.page.pageSize),e.tableData=t.data.list):o.default.showError({vm:e,data:t,errorMsg:""}):o.default.showError({vm:e,data:t,errorMsg:"请求失败"})}).fail(function(t,a,s){e.dataReady--,o.default.showError({vm:e,errorMsg:"服务器通讯失败"})})},batchOperation:function(){for(var e=this,a=[],s=0;s<this.allSelect.length;s++)0==this.allSelect[s].status?this.allSelect[s].status=1:this.allSelect[s].status=0,a.push({id:this.allSelect[s].id,status:this.allSelect[s].status});var i={data:a},n={ssid:c.default.get("ssid"),data:(0,r.default)(i)};t.ajax({url:o.default.apiRootPath+o.default.api.amountMax.listamountMax.review,type:"POST",dataType:"json",data:n}).done(function(a){if(a)if(0==a.code){e.$Message.success("操作成功！");var s=t.extend(!0,[],e.tableData);s[e.updateStatusForm.tableIndex]=e.updateStatusForm,e.updateStatusForm={},e.tableData=s,e.updateStatus=!1,e.doWhat("list")}else o.default.showError({vm:e,data:a,errorMsg:""});else o.default.showError({vm:e,data:a,errorMsg:"请求失败"})}).fail(function(t,a,s){o.default.showError({vm:e,data:n,errorMsg:"服务器通讯失败"})})},changeStatus:function(e,a){var s=this,i={ssid:c.default.get("ssid"),status:a,id:this.tableData[e].id};t.ajax({url:o.default.apiRootPath+o.default.api.amountMax.listamountMax.review,type:"POST",dataType:"json",data:i}).done(function(t){s.saveUpdateStatusLoading=!1,t?0==t.code?(s.$Message.success("操作成功！"),s.doWhat("list")):o.default.showError({vm:s,data:t,errorMsg:""}):o.default.showError({vm:s,data:t,errorMsg:"请求失败"})}).fail(function(t,e,a){s.savePassLoading=!1,o.default.showError({vm:s,data:data,errorMsg:"服务器通讯失败"})})},handleSelectAll:function(t){this.$refs.selection.selectAll(t)},cancelUpdateStatus:function(){this.updateStatusForm={},this.updateStatus=!1}},mounted:function(){},activated:function(){this.doWhat("list")}}}).call(e,a(154))},1151:function(t,e){},1254:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticClass:"doBox"},[t.switching?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),"list"==t.doType?a("div",{staticClass:"ordler-list"},[a("div",{staticClass:"search-box",staticStyle:{"margin-bottom":"20px"}},[a("Form",{ref:"searchData",staticStyle:{display:"inline-block"},attrs:{model:t.searchData,rules:t.searchValidata,inline:""}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{prop:"searchDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"请选择时间范围"},model:{value:t.searchData.searchDate,callback:function(e){t.$set(t.searchData,"searchDate",e)},expression:"searchData.searchDate"}})],1),t._v(" "),a("Select",{staticStyle:{width:"140px"},attrs:{placeholder:"选择审核状态"},model:{value:t.searchData.status,callback:function(e){t.$set(t.searchData,"status",e)},expression:"searchData.status"}},[a("Option",{attrs:{value:1}},[t._v("通过")]),t._v(" "),a("Option",{attrs:{value:-1}},[t._v("拒绝")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("待审核")])],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0px"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){t.search()}}},[t._v("搜索")]),t._v(" "),a("Button",{on:{click:t.resetSearch}},[t._v("清空")])],1)],1)],1)],1),t._v(" "),a("Table",{attrs:{border:"",width:"100%",columns:t.columns,loading:t.getLoading,data:t.tableData}}),t._v(" "),a("div",{staticClass:"page-box"},[t.page.dataCount>10?a("Page",{attrs:{total:t.page.dataCount,current:t.page.pageNumber,"show-total":"","page-size-opts":t.page.pageSizeOpts,"page-size":t.page.pageSize,"show-elevator":"",placement:"top","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}):t._e()],1)],1):t._e()],1)]),t._v(" "),a("Modal",{attrs:{title:"审核"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:t.ImgUrl}}):t._e()])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},980:function(t,e,a){a(1151);var s=a(65)(a(1044),a(1254),null,null);s.options.__file="F:\\changhaochen\\manage\\src\\views\\amountMax\\listamountMax.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] listamountMax.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports}});