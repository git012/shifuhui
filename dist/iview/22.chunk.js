webpackJsonp([22],{1063:function(t,a,e){"use strict";(function(t){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var r=e(155),i=s(r),n=e(231),o=s(n),d=e(116),c=s(d),l=e(100),u=s(l),h=e(232);s(h);console.log("ssssss".MD5()),a.default={name:"merchant_cash",data:function(){var t=this,a=function(t,a,e){console.log(a),1==a||2==a?e():e(new Error(t.message))};return{columns:[{title:"ID",align:"center",key:"id"},{title:"商户名称",align:"center",key:"merchant_name"},{title:"商户法人",align:"center",key:"merchant_connection_name"},{title:"开户名",align:"center",key:"username"},{title:"银行名称",align:"center",key:"bank_name"},{title:"银行卡卡号",align:"center",key:"bank_number"},{title:"金额",align:"center",key:"total",render:function(t,a){return t("span",{},c.default.fmoney(c.default.numberCarry(a.row.total,100,4),6))}},{title:"提现时间",align:"center",key:"date_added"},{title:"操作时间",align:"center",key:"execute_time"},{title:"操作人",align:"center",key:"execute_user_name"},{title:"状态",key:"status",align:"center",render:function(t,a){var e="default",s="申请中";return 1==a.row.status&&(e="green",s="提现成功"),2==a.row.status&&(e="red",s="提现失败"),t("Tag",{props:{color:e,size:"small"}},s)}},{title:"操作",key:"action",width:110,align:"center",render:function(a,e){var s=a("Button",{props:{type:"error",size:"small"},on:{click:function(){t.doWhat("review",e.index)}}},"审核"),r=[];return t.checkPower("review")&&0==e.row.status&&r.push(s),a("div",r)}}],saveType:"new",doType:"list",switching:!1,tableData:[],searchDateType:["申请时间","处理时间"],merchantTypeData:[],areaData:{areaDataReady:3,province:[],citys:[],district:[]},shipStatus:["待审核","提现成功","提现失败"],Totals:{wait:"0.00",fail:"0.00",success:"0.00",sum_total:"0.00"},page:{dataCount:0,pageCount:0,pageSize:10,pageNumber:1,pageSizeOpts:[10,20,50,100]},dataReady:0,currentData:{},defaultData:{id:8,merchant_id:1,merchant_name:"",bank_id:1111,total:"1.0000",status:0,comment:"",date_added:"2017-11-16 16:00:20",bank_name:"",bank_number:""},updateStatusForm:{},updateStatusValidate:{status:[{validator:a,message:"请选择审核结果",trigger:"blur"}]},oldPassError:"",updateStatus:!1,saveUpdateStatusLoading:!1,searchData:{keyword:"",searchDate:[],startDate:"",endDate:"",searchDateType:0,type:0},searchValidata:{}}},computed:{getLoading:function(){return!(0==this.dataReady)},areaDataReady:function(){return!(0==this.areaData.areaDataReady)},doName:function(){return"list"==this.doType?"商户基本信息管理":"edit"==this.doType?"编辑商户":"add"==this.doType?"添加商户":"商户详情"},currentDataValidate:function(){return"add"==this.doType?this.addDataValidate:this.editDataValidate},hasDataChange:function(){return!((0,i.default)(this.currentData)==(0,i.default)(this.tableData[this.currentData.listIndex]))}},methods:{checkPower:function(t){return o.default.api.merchant.merchant_cash[t]?!!this.$store.state.Rights[o.default.api.merchant.merchant_cash[t].MD5()]:!!this.$store.state.Rights[o.default.api.merchant.merchant_cash[t]]},doWhat:function(t,a){if(!this.checkPower(t))return void this.$Message.warning("对不起，您没有此操作权限！");this.switching=!0,"add"==t&&(this.resetCurrentData(),this.doType="add"),"edit"==t&&(this.showEdit(a),this.doType="edit"),"delete"==t&&this.delete(a),"review"==t&&this.changeStatus(a),"list"==t&&(this.resetCurrentData(),this.dataReady+=1,this.init(),this.doType="list"),this.switching=!1},view:function(a){this.currentData=t.extend(!0,{},this.tableData[a]),this.doType="view"},showEdit:function(a){this.currentData=t.extend(!0,{},this.tableData[a]),this.currentData.userewm=o.default.apiRootPath+o.default.api.public.ewm+"&merchantId="+this.currentData.merchantId,this.setCity(this.currentData.merchantProvinceId,!0),this.setDistrict(this.currentData.merchantCityId,!0),this.doType="edit"},resetCurrentData:function(){this.currentData=t.extend(!0,{},this.defaultData)},changePage:function(t){this.page.pageNumber=t,this.search(t)},changePageSize:function(t){this.page.pageSize=t,this.page.pageCount=Math.ceil(this.page.dataCount/this.page.pageSize),this.search()},resetSearch:function(){this.searchData={keyword:"",searchDate:[],startDate:"",endDate:"",type:0},this.page.pageNumber=1,this.dataReady+=1,this.init()},search:function(t){this.searchData.searchDate.length&&(this.searchData.startDate=c.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=c.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd")),this.page.pageNumber=1,t&&(this.page.pageNumber=t),this.doWhat("list")},init:function(){this.getList()},download:function(){this.searchData.searchDate.length?(this.searchData.startDate=c.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=c.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd"),this.downloadlist()):o.default.showError({vm:this,errorMsg:"请输入时间范围"})},downloadlist:function(){var t=o.default.apiRootPath+o.default.api.user.user_cash.dw;location.href=t+"&ssid="+u.default.get("ssid")+"&startDate="+this.searchData.startDate+"&endDate="+this.searchData.endDate+"&type=2"},getList:function(){var a=this,e={ssid:u.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize};""!=this.searchData.keyword&&(e.search=c.default.trim(this.searchData.keyword)),0===this.searchData.searchDateType?(""!=this.searchData.startDate&&(e.startDate=this.searchData.startDate),""!=this.searchData.endDate&&(e.endDate=this.searchData.endDate)):(""!=this.searchData.startDate&&(e.startExecuteDate=this.searchData.startDate),""!=this.searchData.endDate&&(e.endExecuteDate=this.searchData.endDate)),this.searchData.shipStatus>=0&&(e.status=this.searchData.shipStatus),t.ajax({url:o.default.apiRootPath+o.default.api.merchant.merchant_cash.list,type:"POST",dataType:"json",data:e}).done(function(t){a.dataReady--,t?0==t.code?(a.page.dataCount=t.data.count,void 0==t.data.sum_list||(a.Totals.fail=null==t.data.sum_list.reject_total?"0.00":Number(t.data.sum_list.reject_total)/100,a.Totals.wait=Number(t.data.sum_list.unreviewed_total)/100,a.Totals.success=Number(t.data.sum_list.consent_total)/100,a.Totals.sum_total=Number(t.data.sum_list.sum_total)/100),a.page.pageCount=Math.ceil(a.page.dataCount/a.page.pageSize),a.tableData=t.data.list):o.default.showError({vm:a,data:t,errorMsg:""}):o.default.showError({vm:a,data:t,errorMsg:"请求失败"})}).fail(function(t,e,s){a.dataReady--,o.default.showError({vm:a,errorMsg:"服务器通讯失败"})})},getMerchantType:function(){var a=this,e={ssid:u.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize};t.ajax({url:o.default.apiRootPath+o.default.api.public.merchantType,type:"POST",dataType:"json",data:e}).done(function(t){if(a.dataReady--,t)if(0==t.code){var e=[];for(var s in t.data)e.push({value:parseInt(s),label:t.data[s]});a.merchantTypeData=e}else o.default.showError({vm:a,data:t,errorMsg:""});else o.default.showError({vm:a,data:t,errorMsg:"请求失败"})}).fail(function(t,e,s){a.dataReady--,o.default.showError({vm:a,errorMsg:"服务器通讯失败"})})},changeStatus:function(a){this.updateStatusForm=t.extend(!0,{},this.tableData[a]),this.updateStatusForm.tableIndex=a,this.updateStatus=!0},cancelUpdateStatus:function(){this.updateStatusForm={},this.updateStatus=!1},saveUpdateStatus:function(){var a=this;this.$refs.updateStatusForm.validate(function(e){if(e){a.saveUpdateStatusLoading=!0;var s={ssid:u.default.get("ssid"),id:a.updateStatusForm.id,status:a.updateStatusForm.status};t.ajax({url:o.default.apiRootPath+o.default.api.merchant.merchant_cash.review,type:"POST",dataType:"json",data:s}).done(function(e){if(a.saveUpdateStatusLoading=!1,e)if(0==e.code){a.$Message.success("操作成功！");var s=t.extend(!0,[],a.tableData);s[a.updateStatusForm.tableIndex]=a.updateStatusForm,a.updateStatusForm={},a.tableData=s,a.updateStatus=!1,a.doWhat("list")}else o.default.showError({vm:a,data:e,errorMsg:""});else o.default.showError({vm:a,data:e,errorMsg:"请求失败"})}).fail(function(t,e,s){a.savePassLoading=!1,o.default.showError({vm:a,data:data,errorMsg:"服务器通讯失败"})})}})},delete:function(a){var e=this;if(this.tableData[a].id){t.ajax({url:o.default.apiRootPath+o.default.api.merchant.merchant_cash.delete,type:"POST",dataType:"json",data:function(){return{ssid:u.default.get("ssid"),id:e.tableData[a].id,status:0}}()}).done(function(t){t?0==t.code?(e.$Message.success("删除成功!"),e.tableData.splice(a,1)):o.default.showError({vm:e,data:t,errorMsg:""}):o.default.showError({vm:e,data:t,errorMsg:"请求失败"})}).fail(function(t,a,s){o.default.showError({vm:e,errorMsg:"服务器通讯失败"})})}}},mounted:function(){},activated:function(){this.doWhat("list")}}}).call(a,e(154))},1167:function(t,a){},1296:function(t,a,e){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Card",[e("p",{staticClass:"hasButtonP",attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"person"}}),t._v("\n            "+t._s(t.doName)+"\n            "),t.checkPower("list")&&"list"!=t.doType?e("Button",{staticClass:"add-btu margin-left-10",attrs:{type:"warning",size:"small"},on:{click:function(a){t.doWhat("list")}}},[t._v("返回列表\n            ")]):t._e(),t._v(" "),t.checkPower("add")&&"list"==t.doType?e("Button",{staticClass:"add-btu",attrs:{type:"primary",size:"small"},on:{click:function(a){t.doWhat("add")}}},[t._v("添加商户\n            ")]):t._e()],1),t._v(" "),e("div",{staticClass:"doBox"},[t.switching?e("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),"list"==t.doType?e("div",{staticClass:"ordler-list"},[e("div",{staticClass:"search-box"},[e("Form",{ref:"searchData",staticStyle:{display:"inline-block"},attrs:{model:t.searchData,rules:t.searchValidata,inline:""}},[e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{prop:"keyword"}},[e("Input",{attrs:{type:"text",placeholder:"输入名称搜索帐号"},model:{value:t.searchData.keyword,callback:function(a){t.$set(t.searchData,"keyword",a)},expression:"searchData.keyword"}},[e("Icon",{attrs:{slot:"prepend",type:"ios-eye"},slot:"prepend"})],1)],1),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{prop:"searchDate"}},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"请选择时间范围"},model:{value:t.searchData.searchDate,callback:function(a){t.$set(t.searchData,"searchDate",a)},expression:"searchData.searchDate"}}),t._v(" "),e("Select",{staticStyle:{width:"140px"},attrs:{placeholder:"选择时间类型"},model:{value:t.searchData.searchDateType,callback:function(a){t.$set(t.searchData,"searchDateType",a)},expression:"searchData.searchDateType"}},t._l(t.searchDateType,function(a,s){return e("Option",{key:s,attrs:{value:s}},[t._v(t._s(a))])}))],1),t._v(" "),e("Select",{staticStyle:{width:"140px"},attrs:{placeholder:"选择提现状态"},model:{value:t.searchData.shipStatus,callback:function(a){t.$set(t.searchData,"shipStatus",a)},expression:"searchData.shipStatus"}},t._l(t.shipStatus,function(a,s){return e("Option",{key:s,attrs:{value:s}},[t._v(t._s(a))])})),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"}},[e("ButtonGroup",[e("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(a){t.search()}}},[t._v("搜索")]),t._v(" "),e("Button",{attrs:{type:"success",icon:"android-download"},on:{click:function(a){t.download()}}},[t._v("导出")]),t._v(" "),e("Button",{on:{click:t.resetSearch}},[t._v("清空")])],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"search-box",staticStyle:{width:"100%","line-height":"50px",height:"50px","text-align":"left"}},[e("span",{},[t._v("申请提现总额（元）："+t._s(t.Totals.sum_total))]),e("span",{staticStyle:{padding:"0 0px 0 30px"}},[t._v("待审核总计（元）："+t._s(t.Totals.wait))]),e("span",{staticStyle:{padding:"0 30px"}},[t._v("提现成功总计(元)："+t._s(t.Totals.success))]),e("span",[t._v("提现失败总计（元）："+t._s(t.Totals.fail))])]),t._v(" "),e("Table",{staticClass:"small_table",attrs:{border:"",columns:t.columns,loading:t.getLoading,data:t.tableData}}),t._v(" "),e("div",{staticClass:"page-box"},[t.page.dataCount>10?e("Page",{attrs:{total:t.page.dataCount,current:t.page.pageNumber,"show-total":"","page-size-opts":t.page.pageSizeOpts,"page-size":t.page.pageSize,"show-elevator":"",placement:"top","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}):t._e()],1)],1):t._e()],1),t._v(" "),e("Modal",{attrs:{closable:!1,"mask-closable":!1,width:500},model:{value:t.updateStatus,callback:function(a){t.updateStatus=a},expression:"updateStatus"}},[e("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("提现审核")]),t._v(" "),e("Form",{ref:"updateStatusForm",attrs:{model:t.updateStatusForm,"label-width":100,"label-position":"right",rules:t.updateStatusValidate}},[e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"商户名称："}},[t._v("\n                    "+t._s(t.updateStatusForm.merchant_name)+"\n                ")]),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"银行名称："}},[t._v("\n                    "+t._s(t.updateStatusForm.bank_name)+"\n                ")]),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"开户行："}},[t._v("\n                    "+t._s(t.updateStatusForm.opening_bank)+"\n                ")]),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"开户名："}},[t._v("\n                    "+t._s(t.updateStatusForm.username)+"\n                ")]),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"银行卡卡号："}},[t._v("\n                    "+t._s(t.updateStatusForm.bank_number)+"\n                ")]),t._v(" "),e("FormItem",{attrs:{label:"审核状态：",prop:"status"}},[e("RadioGroup",{model:{value:t.updateStatusForm.status,callback:function(a){t.$set(t.updateStatusForm,"status",a)},expression:"updateStatusForm.status"}},[e("Radio",{attrs:{label:"1"}},[e("span",[t._v("通过")])]),t._v(" "),e("Radio",{attrs:{label:"2"}},[e("span",[t._v("拒绝")])])],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:t.cancelUpdateStatus}},[t._v("取消")]),t._v(" "),e("Button",{attrs:{type:"primary",loading:t.saveUpdateStatusLoading},on:{click:t.saveUpdateStatus}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},996:function(t,a,e){e(1167);var s=e(66)(e(1063),e(1296),null,null);s.options.__file="F:\\changhaochen\\GitHub\\shifuhui\\src\\views\\merchant\\cash.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] cash.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports}});