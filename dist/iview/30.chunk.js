webpackJsonp([30],{1046:function(t,e,a){"use strict";(function(t){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(155),i=s(r),n=a(231),o=s(n),d=a(116),l=s(d),c=a(100),u=s(c),h=a(232);s(h);e.default={name:"List",data:function(){var t=this,e=function(t,e,a){0==e||1==e?a():a(new Error(t.message))},a=function(t,e,a){/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(e)?a():a(new Error("请输入正确格式的金额"))};return{modal1:!1,newamount:null,member_id:null,columns:[{title:"会员id",key:"member_id"},{title:"用户名",key:"name"},{title:"创始白积分",key:"white_score",render:function(t,e){return t("span",{},l.default.fmoney(l.default.numberCarry(e.row.white_score,100,4),4))}},{title:"创始红积分",key:"red_score",render:function(t,e){return t("span",{},l.default.fmoney(l.default.numberCarry(e.row.red_score,100,4),4))}},{title:"贡献值",key:"contribution"},{title:"操作",key:"id",align:"center",render:function(e,a){var s=e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.showEdit(a.index)}}},"新增积分"),r=[];return r.push(s),e("div",r)}}],saveType:"new",doType:"list",switching:!1,tableData:[],merchantTypeData:[],areaData:{areaDataReady:3,province:[],citys:[],district:[]},shipStatus:["待审核","审核成功","审核失败"],Totals:{wait:"0.00",fail:"0.00",success:"0.00",sum_total:"0.00"},page:{dataCount:0,pageCount:0,pageSize:10,pageNumber:1,pageSizeOpts:[10,20,50,100]},dataReady:0,currentData:{},defaultData:{amount:"",memberName:""},updateStatusForm:{},updateStatusValidate:{status:[{validator:e,message:"请选择审核结果",trigger:"blur"}]},oldPassError:"",allSelect:[],loadBut:!1,updateStatus:!1,saveUpdateStatusLoading:!1,searchData:{keyword:"",searchDate:[],startDate:"",endDate:"",status:"",type:""},addDataValidate:{amount:[{required:!0,message:"请输入金额"},{validator:a}],memberName:[{required:!0,message:"请输入姓名",trigger:"blur"}]},searchValidata:{}}},computed:{getLoading:function(){return!(0==this.dataReady)},areaDataReady:function(){return!(0==this.areaData.areaDataReady)},doName:function(){return"list"==this.doType?"创始会员":"edit"==this.doType?"编辑商户":"add"==this.doType?"添加创始会员白积分":"商户详情"},currentDataValidate:function(){return"add"==this.doType?this.addDataValidate:this.editDataValidate},hasDataChange:function(){return!((0,i.default)(this.currentData)==(0,i.default)(this.tableData[this.currentData.listIndex]))}},methods:{changePage:function(t){this.page.pageNumber=t,this.search(t)},changePageSize:function(t){this.page.pageSize=t,this.page.pageCount=Math.ceil(this.page.dataCount/this.page.pageSize),this.search()},rankclick:function(t){console.log(t),this.currentData.ranks=12==t?1:24==t?2:3,console.log(this.currentData.ranks)},OnSelect:function(t){},selectionchange:function(t){},allOnSelect:function(t){this.allSelect=t},checkPower:function(t){return!!this.$store.state.Rights[o.default.api.charterMember.List[t].MD5()]},doWhat:function(t,e,a){if(!this.checkPower(t))return void this.$Message.warning("对不起，您没有此操作权限！");this.switching=!0,"add"==t&&(this.resetCurrentData(),this.doType="add"),"edit"==t&&(this.showEdit(e),this.doType="edit"),"delete"==t&&this.delete(e),"review"==t&&this.changeStatus(e),"list"==t&&(this.resetCurrentData(),this.dataReady+=1,this.init(),console.log("ssss"),this.doType="list"),this.switching=!1},view:function(e){this.currentData=t.extend(!0,{},this.tableData[e]),this.doType="view"},showEdit:function(t){this.modal1=!0,console.log(this.tableData[t]),this.member_id=this.tableData[t].member_id},resetCurrentData:function(){this.currentData=t.extend(!0,{},this.defaultData)},search:function(t){this.searchData.searchDate.length&&(this.searchData.startDate=l.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=l.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd")),this.page.pageNumber=1,t&&(this.page.pageNumber=t),this.doWhat("list")},saveEdit:function(){var e=this;this.$refs.currentData.validate(function(a){if(a){var s={ssid:u.default.get("ssid"),score:Number(e.currentData.amount),name:e.currentData.memberName};t.ajax({url:o.default.apiRootPath+o.default.api.charterMember.List.add,type:"POST",dataType:"json",data:s}).done(function(t){e.dataReady--,t?0==t.code?(e.dataReady=0,e.$Message.success("添加成功"),e.doWhat("list")):o.default.showError({vm:e,data:t,errorMsg:""}):o.default.showError({vm:e,data:t,errorMsg:"请求失败"})})}})},cancel:function(){this.modal1=!1,this.newamount=null},addSave:function(){var e=this;if(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(this.newamount)){var a={ssid:u.default.get("ssid"),memberId:this.member_id,score:Number(this.newamount)};t.ajax({url:o.default.apiRootPath+o.default.api.charterMember.List.newAdd,type:"POST",dataType:"json",data:a}).done(function(t){e.dataReady--,t?0==t.code?(e.dataReady=0,e.$Message.success("新增添加成功"),e.doWhat("list")):o.default.showError({vm:e,data:t,errorMsg:""}):o.default.showError({vm:e,data:t,errorMsg:"请求失败"})})}else this.$Message.error("请输入正确格式的金额"),this.modal1=!0},resetSearch:function(){this.searchData={keyword:"",searchDate:[],startDate:"",endDate:"",type:0},this.page.pageNumber=1,this.dataReady+=1,this.init()},init:function(){this.getList()},getList:function(){var e=this;console.log(23);var a={ssid:u.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize};""!=this.searchData.keyword&&(a.name=this.searchData.keyword),t.ajax({url:o.default.apiRootPath+o.default.api.charterMember.List.list,type:"POST",dataType:"json",data:a}).done(function(t){e.dataReady--,t?0==t.code?(e.page.dataCount=t.data.count,e.tableData=t.data.list):o.default.showError({vm:e,data:t,errorMsg:""}):o.default.showError({vm:e,data:t,errorMsg:"请求失败"})}).fail(function(t,a,s){e.dataReady--,o.default.showError({vm:e,errorMsg:"服务器通讯失败"})})},changeStatus:function(e){var a=this;this.$Modal.confirm({title:"兑付方案审核",content:"<p>确定通过兑付方案申请？</p>",onOk:function(){var s={ssid:u.default.get("ssid"),id:e,status:1};t.ajax({url:o.default.apiRootPath+o.default.api.charterMember.List.review,type:"POST",dataType:"json",data:s}).done(function(t){t?0==t.code?(a.$Message.success("操作成功！"),a.doWhat("list")):o.default.showError({vm:a,data:t,errorMsg:""}):o.default.showError({vm:a,data:t,errorMsg:"请求失败"})}).fail(function(t,e){a.savePassLoading=!1,o.default.showError({vm:a,data:data,errorMsg:"服务器通讯失败"})})},onCancel:function(){a.$Message.info("放弃审核")}})},handleSelectAll:function(t){this.$refs.selection.selectAll(t)},cancelUpdateStatus:function(){this.updateStatusForm={},this.updateStatus=!1}},mounted:function(){this.doWhat("list")},activated:function(){this.doWhat("list")}}}).call(e,a(154))},1147:function(t,e){},1238:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("p",{staticClass:"hasButtonP",attrs:{slot:"title"},slot:"title"},[t._v("\n            \n                "+t._s(t.doName)+"\n                "),"list"==t.doType?a("Button",{staticClass:"add-btu",attrs:{type:"primary",size:"small"},on:{click:function(e){t.doWhat("add")}}},[t._v("添加\n                 ")]):t._e()],1),t._v(" "),a("div",{staticClass:"doBox"},[t.switching?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),"list"!=t.doType?a("div",[a("Form",{ref:"currentData",attrs:{model:t.currentData,"label-width":100,"label-position":"right",rules:t.currentDataValidate}},[a("FormItem",{attrs:{label:"用户名：",prop:"memberName"}},[a("div",{staticStyle:{display:"inline-block",width:"204px"}},[a("Input",{model:{value:t.currentData.memberName,callback:function(e){t.$set(t.currentData,"memberName",e)},expression:"currentData.memberName"}})],1)]),t._v(" "),a("FormItem",{attrs:{label:"金额：",prop:"amount"}},[a("div",{staticStyle:{display:"inline-block",width:"204px"}},[a("Input",{model:{value:t.currentData.amount,callback:function(e){t.$set(t.currentData,"amount",e)},expression:"currentData.amount"}})],1)]),t._v(" "),a("div",[a("Button",{staticStyle:{width:"100px"},attrs:{type:"text"},on:{click:function(e){t.doWhat("list")}}},[t._v("取消")]),t._v(" "),a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("保存")])],1)],1)],1):t._e(),t._v(" "),"list"==t.doType?a("div",{staticClass:"ordler-list"},[a("div",{staticClass:"search-box",staticStyle:{"margin-bottom":"20px"}},[a("Form",{ref:"searchData",staticStyle:{display:"inline-block"},attrs:{model:t.searchData,rules:t.searchValidata,inline:""}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{prop:"keyword"}},[a("Input",{attrs:{type:"text",placeholder:"输入名称搜索帐号"},model:{value:t.searchData.keyword,callback:function(e){t.$set(t.searchData,"keyword",e)},expression:"searchData.keyword"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-eye"},slot:"prepend"})],1)],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0px"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){t.search()}}},[t._v("搜索")]),t._v(" "),a("Button",{on:{click:t.resetSearch}},[t._v("清空")])],1)],1)],1)],1),t._v(" "),a("Table",{attrs:{border:"",columns:t.columns,loading:t.getLoading,data:t.tableData}}),t._v(" "),a("div",{staticClass:"page-box"},[t.page.dataCount>10?a("Page",{attrs:{total:t.page.dataCount,current:t.page.pageNumber,"show-total":"","page-size-opts":t.page.pageSizeOpts,"page-size":t.page.pageSize,"show-elevator":"",placement:"top","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}):t._e()],1)],1):t._e()],1)]),t._v(" "),a("Modal",{attrs:{title:"创始会员新增积分"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticStyle:{height:"30px"}}),t._v(" "),a("p",[a("span",[t._v("新增金额：")]),a("Input",{staticStyle:{width:"70%"},model:{value:t.newamount,callback:function(e){t.newamount=e},expression:"newamount"}}),a("span",{staticStyle:{color:"red"}},[t._v("(单位：元)")])],1),t._v(" "),a("p",{staticStyle:{height:"30px"}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addSave}},[t._v("确定")])],1)])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},983:function(t,e,a){a(1147);var s=a(66)(a(1046),a(1238),null,null);s.options.__file="F:\\changhaochen\\世福惠\\src\\views\\charterMember\\Listss.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] Listss.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports}});