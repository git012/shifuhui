webpackJsonp([14],{1008:function(e,t,a){e.exports={default:a(1010),__esModule:!0}},1009:function(e,t,a){"use strict";t.__esModule=!0;var s=a(1008),r=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},1010:function(e,t,a){a(1011);var s=a(67).Object;e.exports=function(e,t,a){return s.defineProperty(e,t,a)}},1011:function(e,t,a){var s=a(117);s(s.S+s.F*!a(85),"Object",{defineProperty:a(68).f})},1055:function(e,t,a){"use strict";(function(e){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(155),o=s(r),i=a(1009),n=s(i),l=a(231),d=s(l),p=a(116),c=s(p),u=a(100),_=s(u);t.default={name:"Ordermanagement",data:function(){var e=this;return{modal2:!1,orderState:!1,modal10:!1,recordStatus:[],paytype:["未知","购物积分","红积分","支付宝","微信","银行卡"],columnsExpressage:[{title:"邮寄方式",key:"shipping_method"},{title:"快递名称",align:"center",key:"expressage_name"},{title:"快递单号",key:"shipping_express_no"},{title:"快递编号",key:"shipping_express_code"},{title:"快递费用",key:"shipping_method"},{title:"操作",key:"action",width:110,align:"center",render:function(t,a){var s=t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showShip(a.row.shipping_express_code,a.row.shipping_express_no)}}},"查看物流"),r=[];return a.row.shipping_express_no&&r.push(s),t("div",r)}}],columnsOrder:[{title:"会员姓名",key:"member_name"},{title:"会员电话",key:"member_name"},{title:"收货人",key:"shipping_member_name"},{title:"收货人联系电话",key:"shipping_mobile"},{title:"收货地址1",key:"shipping_address_1"},{title:"收货地址2",key:"shipping_address_2"}],columnsShoping:[{title:"订单ID",key:"order_id"},{title:"商品名称",key:"name"},{title:"数量",key:"quantity"},{title:"商品单价",key:"price"},{title:"商品小计",key:"total"}],columns:[{title:"订单编号",key:"order_no"},{title:" 商家名称 ",key:"merchant_name"},{title:"用户名称",key:"member_name"},{title:"快递单号",key:"shipping_express_no"},{title:"快递名称",align:"center",key:"expressage_name"},{title:"总价格(积分)",key:"total"},{title:" 新增时间 ",key:"date_added"},{title:"支付方式",align:"center",key:"payment_method",render:function(e,t){return e("span",{props:{color:"default",size:"small"}},"白积分")}},{title:"订单状态",key:"order_status",render:function(e,t){var a="default",s="申请中";return 1==t.row.order_status&&(a="green",s="待支付"),2==t.row.order_status&&(a="red",s="已支付"),3==t.row.order_status&&(a="green",s="待发货"),4==t.row.order_status&&(a="red",s="已发货"),5==t.row.order_status&&(a="green",s="退款中"),6==t.row.order_status&&(a="red",s="已退款"),7==t.row.order_status&&(a="green",s="已完成"),8==t.row.order_status&&(a="red",s="待评价"),9==t.row.order_status&&(a="green",s="取消订单"),10==t.row.order_status&&(a="red",s="确认收货"),11==t.row.order_status&&(a="green",s="已评价"),12==t.row.order_status&&(a="red",s="已删除"),e("span",{props:{color:a,size:"small"}},s)}},{title:"操作",key:"action",width:130,align:"center",render:function(t,a){return t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.show(a.row.id)}}},"查看")}}],saveType:"new",tableData:[],page:{dataCount:0,pageCount:0,pageSize:10,pageNumber:1,pageSizeOpts:[10,20,50,100]},currentData:{id:0,order_no:"",merchant_id:0,member_name:"",total_score:1,status:1,date_added:"",cash:0,score:0},shipStatus:[{value:"1",name:"待支付"},{value:"2",name:"已支付"},{value:"3",name:"待发货"},{value:"4",name:"已发货"},{value:"5",name:"退款中"},{value:"6",name:"已退款"},{value:"7",name:"已完成"},{value:"8",name:"待评价"},{value:"9",name:"取消订单"},{value:"10",name:"确认收货"},{value:"11",name:"已评价"},{value:"12",name:"已删除"}],getLoading:!1,searchData:{keyword:"",searchDate:[],startDate:"",endDate:"",order_status:""},searchValidata:{},orderDetail:[],orderShoping:[],orderDetails:{}}},methods:{doWhat:function(){this.init()},cancel:function(){this.modal2=!0,this.modal10=!1},del:function(){this.modal2=!1},show:function(t){var a=this,s={ssid:_.default.get("ssid"),order_id:t};e.ajax({url:d.default.apiRootPath+d.default.api.management.OrderWhitemanagement.view,type:"POST",dataType:"json",data:s}).done(function(e){if(e)if(0==e.code){var t,s=e.data,r=[];r.push((t={member_name:s.member_name,mobile:s.mobile,shipping_member_name:s.shipping_member_name,shipping_mobile:s.shipping_mobile},(0,n.default)(t,"mobile",s.mobile),(0,n.default)(t,"shipping_address_1",s.shipping_province_name+" "+s.shipping_city_name+" "+s.shipping_district_name+" "+s.shipping_address_1),(0,n.default)(t,"shipping_address_2",s.shipping_address_2),(0,n.default)(t,"shipping_method",s.shipping_method),(0,n.default)(t,"shipping_express_no",s.shipping_express_no),(0,n.default)(t,"shipping_express_code",s.shipping_express_code),(0,n.default)(t,"shipping_method",s.shipping_method),(0,n.default)(t,"expressage_name",s.expressage_name),t)),a.orderDetail=r,a.orderShoping=e.data.product,s.comment=decodeURI(s.comment),a.orderDetails=s,a.orderState=!0}else a.$Message.error(e.message),e.code==d.default.errorCode.runOut.num&&a.$store.commit("logout",a);else a.$Message.error("获取订单详情失败 "+status)}).fail(function(e,t,s){a.$Message.error("获取订单详情失败 "+t)}),this.modal2=!0},changePage:function(e){this.page.pageNumber=e,this.search()},changePageSize:function(e){this.page.pageSize=e,this.page.pageCount=Math.ceil(this.page.dataCount/this.page.pageSize),this.search()},search:function(){console.log((0,o.default)(this.searchData)),this.searchData.searchDate.length&&(this.searchData.startDate=c.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=c.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd")),this.init()},resetSearch:function(){this.searchData={keyword:"",searchDate:[],startDate:"",endDate:"",type:0,order_status:""},this.page.pageNumber=1,this.dataReady+=1,this.init()},init:function(){var t=this,a={ssid:_.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize};""!=this.searchData.keyword&&(a.search=c.default.trim(this.searchData.keyword)),""!=this.searchData.startDate&&(a.startDate=this.searchData.startDate),""!=this.searchData.endDate&&(a.endDate=this.searchData.endDate),""!=this.searchData.order_status&&(a.orderStatus=this.searchData.order_status),e.ajax({url:d.default.apiRootPath+d.default.api.management.OrderWhitemanagement.list,type:"POST",dataType:"json",data:a}).done(function(e){if(e)if(0==e.code){t.page.dataCount=e.data.count,t.page.pageCount=Math.ceil(t.page.dataCount/t.page.pageSize);for(var a=0;a<e.data.list.length;a++)e.data.list[a].comment=decodeURI(e.data.list[a].comment);t.tableData=e.data.list}else t.$Message.error(e.message),e.code==d.default.errorCode.runOut.num&&t.$store.commit("logout",t);else t.$Message.error("获取订单列表失败 "+status)}).fail(function(e,a,s){t.$Message.error("获取订单列表失败 "+a)})},showShip:function(t,a){var s=this,r={ssid:_.default.get("ssid"),ShipperCode:t,LogisticCode:a};this.modal10=!0,this.modal2=!1,e.ajax({url:d.default.apiRootPath+d.default.api.management.Ordermanagement.queryShip,type:"POST",dataType:"json",data:r}).done(function(e){e?0==e.code?e.data.Traces.length>0?s.recordStatus=e.data.Traces:s.recordStatus.push({AcceptStation:"暂无物流信息",AcceptTime:" "}):(s.$Message.error(e.message),e.code==d.default.errorCode.runOut.num&&s.$store.commit("logout",s)):s.$Message.error("获取详情失败 ")}).fail(function(e,t,a){s.$Message.error("获取详情失败 ")})}},mounted:function(){this.doWhat()},activated:function(){}}}).call(t,a(154))},1104:function(e,t){},1237:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",[a("div",{staticClass:"doBox"},[a("div",{staticClass:"search-box"},[a("Form",{ref:"searchData",attrs:{model:e.searchData,rules:e.searchValidata,inline:""}},[a("FormItem",{attrs:{prop:"keyword"}},[a("Input",{staticStyle:{width:"250px"},attrs:{type:"text",placeholder:"输入商家名称与会员名称搜索"},model:{value:e.searchData.keyword,callback:function(t){e.$set(e.searchData,"keyword",t)},expression:"searchData.keyword"}},[a("Icon",{staticStyle:{width:"30px"},attrs:{slot:"prepend",type:"ios-eye"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"searchDate"}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"daterange",placeholder:"请选择时间范围"},model:{value:e.searchData.searchDate,callback:function(t){e.$set(e.searchData,"searchDate",t)},expression:"searchData.searchDate"}})],1),e._v(" "),a("FormItem",[a("Select",{staticStyle:{width:"250px"},attrs:{placeholder:"选择订单状态"},model:{value:e.searchData.order_status,callback:function(t){e.$set(e.searchData,"order_status",t)},expression:"searchData.order_status"}},e._l(e.shipStatus,function(t){return a("Option",{attrs:{value:t.value}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("FormItem",[a("ButtonGroup",[a("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){e.search()}}},[e._v("搜索")]),e._v(" "),a("Button",{on:{click:function(t){e.resetSearch()}}},[e._v("清空")])],1)],1)],1)],1),e._v(" "),a("Table",{attrs:{border:"",columns:e.columns,loading:e.getLoading,data:e.tableData}}),e._v(" "),a("div",{staticClass:"page-box"},[e.page.dataCount>10?a("Page",{attrs:{total:e.page.dataCount,current:e.page.pageNumber,"show-total":"","page-size-opts":e.page.pageSizeOpts,"page-size":e.page.pageSize,"show-elevator":"",placement:"top","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}}):e._e()],1)],1),e._v(" "),e.orderState?a("Modal",{attrs:{width:"700",closable:!1,styles:{top:"10px"}},on:{"on-cancel":e.del},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("p",{staticStyle:{color:"black","font-weight":"bold","text-align":"left","font-size":"18px"},attrs:{slot:"header"},slot:"header"},[a("span",[e._v("订单详情")])]),e._v(" "),a("div",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("会员信息")]),e._v(" "),a("Table",{attrs:{columns:e.columnsOrder,data:e.orderDetail}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",{staticStyle:{"margin-top":"20px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("订单状态")]),e._v(" "),e.orderDetails.order_status>=5?a("Alert",{attrs:{type:"error"}},[e._v("订单状态：\n                                "),5==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("退款中")]):e._e(),e._v(" "),6==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已退款")]):e._e(),e._v(" "),7==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已完成")]):e._e(),e._v(" "),8==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("待评价")]):e._e(),e._v(" "),9==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("订单已取消")]):e._e(),e._v(" "),10==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("确认收货")]):e._e(),e._v(" "),11==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已评价")]):e._e(),e._v(" "),12==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已删除")]):e._e()]):e._e(),e._v(" "),e.orderDetails.order_status<5?a("Steps",{attrs:{current:e.orderDetails.order_status-1,size:"small"}},[a("Step",{attrs:{title:"待支付"}}),e._v(" "),a("Step",{attrs:{title:"已支付"}}),e._v(" "),a("Step",{attrs:{title:"待发货"}}),e._v(" "),a("Step",{attrs:{title:"已发货"}})],1):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",{staticStyle:{"margin-top":"20px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("商品信息")]),e._v(" "),a("Table",{attrs:{columns:e.columnsShoping,data:e.orderShoping}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("快递信息")]),e._v(" "),a("Table",{attrs:{columns:e.columnsExpressage,data:e.orderDetail}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Row",{attrs:{gutter:50}},[a("Col",{attrs:{span:"12"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("订单信息")]),e._v(" "),a("p",[e._v("订单总金额(积分)："),a("span",{staticStyle:{"font-size":"16px",color:"red"}},[e._v(e._s(e.orderDetails.total))])]),e._v(" "),a("p",[e._v("支付方式："),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(""==e.orderDetails.payment_method?"待支付":"白积分"))])])])],1),e._v(" "),a("Col",{attrs:{span:"12"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("其他信息")]),e._v(" "),a("p",[e._v("备注：\n                                    "),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.orderDetails.comment))])]),e._v(" "),a("p",[e._v("\n                                    新增时间："),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.orderDetails.date_added))])]),e._v(" "),a("p",[e._v("\n                                    修改时间："),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.orderDetails.date_modified))])])])],1)],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.del}},[e._v("关闭")])],1)]):e._e(),e._v(" "),a("Modal",{attrs:{title:"物流详情",width:"500","class-name":"vertical-center-modal"},on:{"on-cancel":e.cancel},model:{value:e.modal10,callback:function(t){e.modal10=t},expression:"modal10"}},[[a("Timeline",e._l(e.recordStatus,function(t){return a("Timeline-item",[a("p",{staticClass:"time"},[e._v(e._s(t.AcceptTime))]),e._v(" "),a("p",{staticClass:"content"},[e._v(e._s(t.AcceptStation))])])}))],e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],2)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},988:function(e,t,a){a(1104);var s=a(66)(a(1055),a(1237),"data-v-0e47a3f6",null);s.options.__file="F:\\changhaochen\\GitHub\\shifuhui\\src\\views\\management\\OrderWhitemanagement.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] OrderWhitemanagement.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports}});