webpackJsonp([39],{1038:function(t,e,a){"use strict";(function(t){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(230),i=s(r),n=a(116),d=s(n),l=a(100),o=s(l),h=a(231),u=s(h);e.default={name:"agentcost",data:function(){return{charts:"",typeEnd:"date",textTitle:"",searchData:{keyword:"",searchDate:[],startDate:"",endDate:"",type:0},count:{total:"0.00",level_1_sum:"0.00",level_2_sum:"0.00",level_3_sum:"0.00",level_4_sum:"0.00",level_5_sum:"0.00"},type_1_sum:[],type_2_sum:[],type_3_sum:[],type_4_sum:[],type_5_sum:[],type_date:[],shipStatus:["日","月","年"],searchValidata:{}}},methods:{Onchange:function(t){this.typeEnd=0===t?"date":1==t?"month":"year"},drawPie:function(t){this.charts=u.default.init(document.getElementById(t)),this.charts.setOption({title:{text:"代理商费用统计"},tooltip:{trigger:"axis"},legend:{data:["全球总代理","省代理","市代理","区县代理","其他"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:this.type_date}],yAxis:[{type:"value"}],series:[{name:"全球总代理",type:"line",data:this.type_1_sum},{name:"省代理",type:"line",data:this.type_2_sum},{name:"市代理",type:"line",data:this.type_3_sum},{name:"区县代理",type:"line",data:this.type_4_sum},{name:"其它",type:"line",data:this.type_5_sum}]})},resetCurrentData:function(){this.currentData=t.extend(!0,{},this.defaultData)},resetSearch:function(){this.searchData={keyword:"",searchDate:[],startDate:"",endDate:"",type:0}},search:function(){this.searchData.startDate<=this.searchData.endDate?(this.searchData.startDate=d.default.FormatDate(this.searchData.startDate,"yyyy-MM-dd"),this.searchData.endDate=d.default.FormatDate(this.searchData.endDate,"yyyy-MM-dd"),"year"==this.typeEnd?(this.searchData.endDate=d.default.DateAdd("y ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.DateAdd("d ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.FormatDate(this.searchData.endDate,"yyyy-MM-dd")):"month"==this.typeEnd&&(this.searchData.endDate=d.default.DateAdd("m ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.DateAdd("d ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.FormatDate(this.searchData.endDate,"yyyy-MM-dd")),this.getList()):i.default.showError({vm:this,errorMsg:"结束时间不能小于开始时间"})},download:function(){""==this.searchData.startDate&&""==this.searchData.endDate?i.default.showError({vm:this,errorMsg:"时间不能为空"}):this.searchData.startDate<=this.searchData.endDate?(this.searchData.startDate=d.default.FormatDate(this.searchData.startDate,"yyyy-MM-dd"),this.searchData.endDate=d.default.FormatDate(this.searchData.endDate,"yyyy-MM-dd"),"year"==this.typeEnd?(this.searchData.endDate=d.default.DateAdd("y ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.DateAdd("d ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.FormatDate(this.searchData.endDate,"yyyy-MM-dd")):"month"==this.typeEnd&&(this.searchData.endDate=d.default.DateAdd("m ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.DateAdd("d ",1,new Date(this.searchData.endDate)),this.searchData.endDate=d.default.FormatDate(this.searchData.endDate,"yyyy-MM-dd")),this.downloadlist()):i.default.showError({vm:this,errorMsg:"结束时间不能小于开始时间"})},downloadlist:function(){if(""!=this.searchData.startDate)this.searchData.startDate=this.searchData.startDate;else{var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();s=s<10?"0"+s:s,this.searchData.startDate=e+"-"+a+"-01"}if(""!=this.searchData.endDate)this.searchData.endDate=this.searchData.endDate;else{var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();s=s<10?"0"+s:s,this.searchData.endDate=e+"-"+a+"-"+s}var r=i.default.apiRootPath+i.default.api.dataStatistics.agentcost.dw;""==this.searchData.startDate&&""==this.searchData.endDate||(location.href=r+"&ssid="+o.default.get("ssid")+"&startDate="+this.searchData.startDate+"&endDate="+this.searchData.endDate)},getList:function(){var e=this,a={ssid:o.default.get("ssid")};if(""!=this.searchData.keyword&&(a.search=d.default.trim(this.searchData.keyword)),""!=this.searchData.startDate)a.startDate=this.searchData.startDate;else{var s=new Date,r=s.getFullYear(),n=s.getMonth()+1;n=n<10?"0"+n:n;var l=s.getDate();l=l<10?"0"+l:l,a.startDate=r+"-"+n+"-01"}if(this.searchData.shipStatus>=0?a.type=this.searchData.shipStatus+1:a.type=1,""!=this.searchData.endDate)a.endDate=this.searchData.endDate;else{var s=new Date,r=s.getFullYear(),n=s.getMonth()+1;n=n<10?"0"+n:n;var l=s.getDate();l=l<10?"0"+l:l,a.endDate=r+"-"+n+"-"+l}t.ajax({url:i.default.apiRootPath+i.default.api.dataStatistics.agentcost.list,type:"POST",dataType:"json",data:a}).done(function(t){if(e.dataReady--,t)if(0==t.code){if(e.count.total=(Number(null!=t.data.total?t.data.total:"0.00")/1e4).toFixed(6),e.count.level_1_sum=(Number(null!=t.data.sum.level_1_sum?t.data.sum.level_1_sum:"0.00")/1e4).toFixed(6),e.count.level_2_sum=(Number(null!=t.data.sum.level_2_sum?t.data.sum.level_2_sum:"0.00")/1e4).toFixed(6),e.count.level_3_sum=(Number(null!=t.data.sum.level_3_sum?t.data.sum.level_3_sum:"0.00")/1e4).toFixed(6),e.count.level_4_sum=(Number(null!=t.data.sum.level_4_sum?t.data.sum.level_4_sum:"0.00")/1e4).toFixed(6),e.count.level_5_sum=(Number(null!=t.data.sum.level_5_sum?t.data.sum.level_5_sum:"0.00")/1e4).toFixed(6),void 0==t.data.list);else{e.type_1_sum=[],e.type_2_sum=[],e.type_3_sum=[],e.type_4_sum=[],e.type_5_sum=[],e.type_date=[];for(var a=0;a<t.data.list.length;a++)e.type_1_sum.push((Number(t.data.list[a].level_1)/1e4).toFixed(6)),e.type_2_sum.push((Number(t.data.list[a].level_2)/1e4).toFixed(6)),e.type_3_sum.push((Number(t.data.list[a].level_3)/1e4).toFixed(6)),e.type_4_sum.push((Number(t.data.list[a].level_4)/1e4).toFixed(6)),e.type_5_sum.push((Number(t.data.list[a].level_5)/1e4).toFixed(6)),e.type_date.push(t.data.list[a].date);e.drawPie("mains")}e.tableData=t.data.list}else i.default.showError({vm:e,data:t,errorMsg:""});else i.default.showError({vm:e,data:t,errorMsg:"请求失败"})}).fail(function(t,a,s){e.dataReady--,i.default.showError({vm:e,errorMsg:"服务器通讯失败"})})}},mounted:function(){this.getList(),this.drawPie("mains")},activated:function(){this.drawPie("mains")}}}).call(e,a(154))},1109:function(t,e){},1182:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticClass:"search-box"},[a("Form",{ref:"searchData",staticStyle:{display:"inline-block"},attrs:{model:t.searchData,rules:t.searchValidata,inline:""}},[a("Select",{staticStyle:{width:"140px"},attrs:{placeholder:"选择时间类型"},on:{"on-change":t.Onchange},model:{value:t.searchData.shipStatus,callback:function(e){t.$set(t.searchData,"shipStatus",e)},expression:"searchData.shipStatus"}},t._l(t.shipStatus,function(e,s){return a("Option",{key:s,attrs:{value:s}},[t._v(t._s(e))])})),t._v(" "),a("FormItem",{attrs:{prop:"searchDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:t.typeEnd,placeholder:"请选择开始时间"},model:{value:t.searchData.startDate,callback:function(e){t.$set(t.searchData,"startDate",e)},expression:"searchData.startDate"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"searchDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:t.typeEnd,placeholder:"请选择结束时间"},model:{value:t.searchData.endDate,callback:function(e){t.$set(t.searchData,"endDate",e)},expression:"searchData.endDate"}})],1),t._v(" "),a("FormItem",[a("ButtonGroup",[a("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){t.search()}}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"success",icon:"android-download"},on:{click:function(e){t.download()}}},[t._v("导出")]),t._v(" "),a("Button",{on:{click:t.resetSearch}},[t._v("清空")])],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"mains"}}),t._v(" "),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{span:"4"}},[t._v("总额(万)："),a("span",{staticClass:"num",staticStyle:{color:"red"}},[t._v(t._s(t.count.total))])]),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v("全球总代理(万)："),a("span",{staticClass:"num",staticStyle:{color:"red"}},[t._v(t._s(t.count.level_1_sum))])]),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v("省代理(万)："),a("span",{staticClass:"num",staticStyle:{color:"red"}},[t._v(t._s(t.count.level_2_sum))])]),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v("市代理(万)："),a("span",{staticClass:"num",staticStyle:{color:"red"}},[t._v(t._s(t.count.level_3_sum))])]),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v("区县代理(万)："),a("span",{staticClass:"num",staticStyle:{color:"red"}},[t._v(t._s(t.count.level_4_sum))])]),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v("其它(万)："),a("span",{staticClass:"num",staticStyle:{color:"red"}},[t._v(t._s(t.count.level_5_sum))])])],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},979:function(t,e,a){a(1109);var s=a(65)(a(1038),a(1182),null,null);s.options.__file="C:\\Users\\Administrator\\Documents\\Tencent Files\\601041478\\FileRecv\\git\\manage\\src\\views\\dataStatistics\\agentcost.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] agentcost.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports}});